## GPX Extensions

### Thoughts / Research

#### Overview

A number of "standard" GPX 1.1 extension schemas are proposed for fitness, sailing, and aviation.

Common elements have been grouped into separate schemas to improve clarity.

| Schema  | Namespace | Description                | Elements |
| ------- | --------- | -------------------------- | -------- |
| gpx_air | air       | Air / aviation             | 10       |
| gpx_eng | eng       | Engine                     | 8        |
| gpx_fit | fit       | Fitness                    | 6        |
| gpx_gen | gen       | Generic                    | 1        |
| gpx_imu | imu       | Inertial measurement unit  | 5        |
| gpx_met | met       | Meteorological             | 7        |
| gpx_nav | nav       | Navigation                 | -        |
| gpx_pvt | pvt       | Position / velocity / time | 4        |
| gpx_sea | sea       | Sea / nautical             | 9        |
| TOTAL   |           |                            | 50       |




#### Position / Velocity / Time (PVT) - gpx_pvt

Position / velocity / time (PVT) elements are core outputs of GPS / GNSS chipsets and location APIs.

These elements can all be generated by the GPS / GNSS receiver and many of the PVT elements are in the [RMC](https://gpsd.gitlab.io/gpsd/NMEA.html#_rmc_recommended_minimum_navigation_information) and [VTG](https://gpsd.gitlab.io/gpsd/NMEA.html#_vtg_track_made_good_and_ground_speed) sentences of NMEA 0183.

It may be worth considering whether some (or all) of the PVT elements should be in the GPX 1.2 schema because they are so common - see [examples](examples.md)

e.g. course + speed could be added to GPX 1.2, making them available to existing software that recognises them in GPX 1.0 files



##### Position

The following positional components can be added to `<wpt>`, `<rtept>` and `<trkpt>` elements via extensions in GPX 1.1 and 1.2

These are available from a variety of NMEA sentences, binary messages and location services provided by Apple and Android.

| Name     | Values | Description                                                  |
| -------- | ------ | ------------------------------------------------------------ |
| `<dist>` | >= 0   | Cumulative distance over ground for the trip / activity in meters (m)<br />Sometimes measured by a wheel odometer, thus can be independent of the GPS / GNSS receiver<br />See [VLW](https://gpsd.gitlab.io/gpsd/NMEA.html#_vlw_distance_traveled_through_water) (ground distance since reset) - units are nautical miles so need to convert to meters |
| `<hacc>` | >= 0   | Horizontal accuracy / error estimate in meters, such that the difference between the true horizontal position and the reported horizontal position is less than the accuracy / error estimate 68% of the time. 68% corresponds to 1-sigma of a normal distribution, but this does not imply that errors are independent or normally distributed.<br />TODO - list NMEA sentences |
| `<vacc>` | >= 0   | Vertical accuracy / error estimate in meters, such that the difference between the true vertical position and the reported vertical position is less than the accuracy / error estimate 68% of the time. 68% corresponds to 1-sigma of a normal distribution, but this does not imply that errors are independent or normally distributed.<br />TODO - list NMEA sentences |

Notes:

- Distance is included to avoid cumulative errors
- TODO - show calculation of hAcc from lon and lat



##### Velocity

The following velocity components can be added to `<wpt>`, `<rtept>` and `<trkpt>` via extensions in GPX 1.1 and 1.2

They are all optional, although the values of `<course>` and `<speed>` which are calculated by the GPS / GNSS chipset are highly recommended.


| Name            | Values   | Description                                                  |
| --------------- | -------- | ------------------------------------------------------------ |
| `<cog acc="n">` | 0 to 360 | Course over ground (COG) in degrees is the actual direction of travel relative to true north. COG is an independent measurement from position, so it is possible (and not an error) for the difference between two successive positions to be inconsistent with the COG values.<br />See [RMC](https://gpsd.gitlab.io/gpsd/NMEA.html#_rmc_recommended_minimum_navigation_information) and [VTG](https://gpsd.gitlab.io/gpsd/NMEA.html#_vtg_track_made_good_and_ground_speed) in NMEA 0183 |
| `<sog acc="n">` | >= 0     | Speed over ground (SOG) / ground speed (GS) in m/s is the horizontal speed calculated by the GPS / GNSS chipset. SOG is an independent measurement from position, so it is possible (and not an error) for the difference between two successive positions to be inconsistent with the SOG values.<br />See [RMC](https://gpsd.gitlab.io/gpsd/NMEA.html#_rmc_recommended_minimum_navigation_information) and [VTG](https://gpsd.gitlab.io/gpsd/NMEA.html#_vtg_track_made_good_and_ground_speed) in NMEA 0183 - units are knots or km/h, but recommend converting from knots to m/s |
| `<roc acc="n">` |          | Rate of climb (ROC) / rate of descent (ROD) / vertical speed / in m/s calculated by the GPS / GNSS chipset. ROC is an independent measurement from position, so it is possible (and not an error) for the difference between two successive positions to be inconsistent with the ROC values. |


Separate accuracy estimates are an old idea:

| Name      | Values   | Description                                                  |
| --------- | -------- | ------------------------------------------------------------ |
| `<cacc>`  | 0 to 180 | Course over ground (COG) accuracy / error estimate in degrees, such that the difference between the true COG and the reported COG is less than the accuracy / error estimate 68% of the time. 68% corresponds to 1-sigma of a normal distribution, but this does not imply that errors are independent or normally distributed. |
| `<sacc>`  | >= 0     | Speed over ground (SOG) accuracy / error estimate in m/s, such that the difference between the true SOG and the reported SOG is less than the accuracy / error estimate 68% of the time. 68% corresponds to 1-sigma of a normal distribution, but this does not imply that errors are independent or normally distributed. |
| `<vsacc>` | >= 0     | Vertical speed accuracy / error estimate in m/s, such that the difference between the true ROC and the reported ROC is less than the accuracy / error estimate 68% of the time. 68% corresponds to 1-sigma of a normal distribution, but this does not imply that errors are independent or normally distributed. |

ROC is most important for aviation, hence the abbreviation - [wiki](https://en.wikipedia.org/wiki/List_of_aviation,_avionics,_aerospace_and_aeronautical_abbreviations#V)

COG and SOG are nautical terms that are also used in aviation.

See [article](https://www.sailingissues.com/navcourse4.html) about naming of COG, SOG, etc.

- COG is not the same as heading - consider sailing, flying, and car drifting
- Subtleties
  - COG is not quite the same as CMG / TMG which are both over a longer period of time
    - Planes may refer to COG as "track" though?
  - SOG is not the quite same as SMG which is over a longer period of time
- COG + SOG - sensors other than GNSS
  - SOG can sometimes be generated by alternative means, such as a bicycle wheel sensor, or GNSS + INS solution
  - COG can be derived from a compass when on land, but not when in the sea / air because "heading" and COG are different
- Excluded
  - Glide ratio (slope) can be determined from ground "speed" (SOG) and "ROD" (rate of descent) - [link](https://www.nasa.gov/pdf/582952main_Glide-Slope%20Ratio%20Explanation.pdf)
    - glide ratio = horizontal distance /  change in altitude
    - glide ratio (instantaneous) = horizontal speed (SOG) / vertical speed




##### Time

The following time components can be added to `<wpt>`, `<rtept>` and `<trkpt>` elements via extensions in GPX 1.1 and 1.2.

These are available from a variety of binary messages from GPS / GNSS chipsets.

Add to GPX 1.2 but insignificant for GPX 1.1 extension?

| Name     | Description                                                  |
| -------- | ------------------------------------------------------------ |
| `<tacc>` | Time accuracy / error estimate in seconds (including milliseconds), such that the difference between the true time and the reported time is less than the accuracy / error estimate 68% of the time. 68% corresponds to 1-sigma of a normal distribution, but this does not imply that errors are independent or normally distributed. |



#### Inertial Measurement Unit  - gpx_imu

Data derived from inertial measurement units (IMUs) can be added to `<wpt>`, `<rtept>` and `<trkpt>`  elements via extensions in GPX 1.1 and 1.2.

TODO - consider multiple readings like compass and heading indicator


| Name        | Values       | Description                                                  |
| ----------- | ------------ | ------------------------------------------------------------ |
| `<head acc="n">` | 0 to 360     | Heading is the direction in which an object is pointed, relative to true north in degrees (°)<br />Sailors and pilots refer to yaw as "heading"<br />See THS, [HDT](https://gpsd.gitlab.io/gpsd/NMEA.html#_hdt_heading_true), [HDG](https://gpsd.gitlab.io/gpsd/NMEA.html#_hdg_heading_deviation_variation) and [VHW](https://gpsd.gitlab.io/gpsd/NMEA.html#_vhw_water_speed_and_heading) in NMEA 0183 |
| `<rot acc="n">` |              | Rate of turn (ROT) is the rate of change of heading, measured in degrees per minute (°/min)<br />Positive = clockwise, negative = counter-clockwise<br />See [ROT](https://gpsd.gitlab.io/gpsd/NMEA.html#_rot_rate_of_turn) in NMEA 0183 |
| `<roll acc="n">` | -180 to +180 | Roll is the side-to-side rotation of an object about its longitudinal / x axis in degrees (°)<br />Sailors refer to roll as "heel", pilots refer to it as "bank" |
| `<pitch acc="n">` | -90 to +90   | Pitch is the up / down rotation of an object about its transverse / y axis in degrees (°)<br />Sailors often refer to pitch as "trim" |
| `<stat>` | 0 or 1       | INS status flag. 0 = SPAN pre-alignment INS status, 1 = SPAN post-alignment INS status<br />TBC |

TODO - might add heave, surge, sway?

Separate accuracy estimates are an old idea:

| Name        | Values       | Description                                                  |
| ----------- | ------------ | ------------------------------------------------------------ |
| `<hacc>` | 0 to 180 | Heading accuracy / error estimate in degrees, such that the difference between the true yaw and the reported yaw is less than the accuracy / error estimate 68% of the time. 68% corresponds to 1-sigma of a normal distribution, but this does not imply that errors are independent or normally distributed. |
| `<racc>` | 0 to 180 | Roll accuracy / error estimate in degrees, such that the difference between the true roll and the reported roll is less than the accuracy / error estimate 68% of the time. 68% corresponds to 1-sigma of a normal distribution, but this does not imply that errors are independent or normally distributed. |
| `<pacc>` | 0 to 90  | Pitch accuracy / error estimate in degrees, such that the difference between the true pitch and the reported pitch is less than the accuracy / error estimate 68% of the time. 68% corresponds to 1-sigma of a normal distribution, but this does not imply that errors are independent or normally distributed. |

u-blox

- https://www.u-blox.com/en/product/zed-f9r-module?legacy=Current#Documentation-&-resources
- https://content.u-blox.com/sites/default/files/documents/ZED-F9R-03B_DataSheet_UBX-22024085.pdf
- https://content.u-blox.com/sites/default/files/documents/u-blox-F9-HPS-1.30_InterfaceDescription_UBX-22010984.pdf



Notes

- Heading is relative to true north, rather than magnetic north
  - Gyrocompasses are widely used on boats and ships
  - The aviation industry is currently preparing to move from the use of magnetic north to true north - [link](https://www.aerosociety.com/news/time-for-a-change-of-direction)
- Background
  - 6 degrees of freedom - [link](https://www.roadtovr.com/introduction-positional-tracking-degrees-freedom-dof/) - [wiki](https://en.wikipedia.org/wiki/Degrees_of_freedom_(mechanics))
  - See Wikipedia about [IMU](https://en.wikipedia.org/wiki/Inertial_measurement_unit) devices
  - See Wiki about [INS](https://en.wikipedia.org/wiki/Inertial_navigation_system#Inertial_navigation_systems_in_detail) and page about [ship motion](https://nautiluslive.org/video/2020/12/09/beyond-wow-six-types-ship-motion)
  - See Novatel [PASHR](https://docs.novatel.com/OEM7/Content/SPAN_Logs/PASHR.htm) and gpsd [PASHR](https://gpsd.gitlab.io/gpsd/NMEA.html#_pashr_rt300_proprietary_roll_and_pitch_sentence)
- TBC - Heave, sway and surge
  - Typically describe motion of boats
    - surge - Movement forward and backward in meters (m/s)
    - sway - Movement left and right in meters (m/s)
    - heave - Movement upwards and downward in meters (m/s)
  - Aircraft may also have the concept - [link](https://ntrs.nasa.gov/api/citations/20160013217/downloads/20160013217.pdf)
  
- Reference for value ranges
  - Option 1 - yaw = 0 to 360, pitch = -90 to 90, roll = -90 to 90 - [link](https://www.skylineglobe.com/Legacy/TerraExplorer/v6.6.0/APIReferenceGuide/Yaw_Pitch_and_Roll_Angles.htm)
  - Option 2 - yaw = -18 0to 180, pitch = -90 to 90, roll = -90 to 90 - [link](https://stackoverflow.com/questions/9143161/max-and-min-values-of-roll-pitch-and-yaw-of-the-capture-motion-of-iphone)

- Errors
  - overview of error estimates - [link](https://www.canalgeomatics.com/knowledgebase/imu-accuracy-error-definitions/)

- Aviation refers to pitch and roll as "attitude" - see [artificial horizon](https://en.wikipedia.org/wiki/Attitude_indicator) and [stack exchange](https://aviation.stackexchange.com/questions/35933/what-is-the-exact-meaning-of-attitude-does-it-include-translational-movement)
  - boats and aircraft both use the word "pitch"
  - boats and aircraft use the word "heading" instead of "yaw"
- Pitch, roll and yaw also can be determined using two high-precision GNSS receivers - e.g. Novatel [Attitude](https://novatel.com/solutions/attitude)
  - Should not assume they are INS, they might also be gyroscopic such as on a plane
- Excluded for now
  - Instantaneous heave (up / down), sway (left / right) and surge (front / back)
    - I've seen instantaneous heave in GNSS + INS solutions, but not sway or surge



#### Generic - gpx_gen

Generic elements that do not fit into other categories.

| Name     | Values | Description                                                  |
| -------- | ------ | ------------------------------------------------------------ |
| `<load>` |        | Load cell such as a strain gauge reporting in kg<br />maxOccurs="unbounded" |

- Load cells have various applications
  - Sailing - short [video](https://www.youtube.com/watch?v=hpqvp6MbXAQ) with data overlay at 1:28
  - Hang gliding - [link](https://forum.hanggliding.org/viewtopic.php?p=209492&sid=948615f77f43e4fbb797ceefc16e6973#p209492)



#### Engine - gpx_eng

SUPERCEDED - The engine elements listed below are important to motor boats, planes, and helicopters.

| Name        | Values | Description                                                  |
| ----------- | ------ | ------------------------------------------------------------ |
| tach        |        | Tachometer for engine / rotor / propeller for revolutions per minute (RPM)<br />See [RPM](https://gpsd.gitlab.io/gpsd/NMEA.html#_rpm_revolutions) in NMEA 0183 - only record when status "A" |
| trim        |        | Propeller pitch as a percentage of the maximum (%) - boats<br />See [RPM](https://gpsd.gitlab.io/gpsd/NMEA.html#_rpm_revolutions) in NMEA 0183 - only record when status "A" |
| torq        |        | Engine torque in Newton metres (Nm)<br />e.g. helicopters    |
| temp id="n" |        |                                                              |
| chttemp     |        | Cylinder head temperature (CHT) in degrees centigrade (° C)<br />planes and boats |
| egttemp     |        | Exhaust gas temperature (EGT) in degrees centigrade (° C)<br />e.g. planes |
| carbtemp    |        | Carburetor temperature in degrees centigrade (° C)<br />e.g. planes |
| bstpres     |        | Boost pressure (turbo or supercharger) in kilopascals (kPa)<br />e.g. boats |
| vacpres     |        | Vacuum pressure in kilopascals (kPa)<br />e.g. boats, planes and helicopters |
| oiltemp     |        | Oil temperature in degrees centigrade (° C)<br />e.g. boats, planes and helicopters |
| oilpres     |        | Oil pressure in kilopascals (kPa)<br />e.g. engine or transmission |
| cooltemp    |        | Coolant / water temperature in degrees centigrade (° C)      |
| coolpres    |        | Coolant / water pressure in kilopascals (kPa)                |
| fuelqty     |        | Fuel quantity in litres (L)                                  |
| fuelpres    |        | Fuel pressure in kilopascals (kPa)                           |
| battvolt    |        | Battery level in volts (V)                                   |
| battamp     |        | Battery current - negative (charging) or positive (discharging) in amps (A) |



**New idea**

| Name            | Values   | Description                                                  |
| --------------- | -------- | ------------------------------------------------------------ |
| tach id="n"     | >= 0     | Tachometer for engine / rotor / propeller for revolutions per minute (RPM)<br />See [RPM](https://gpsd.gitlab.io/gpsd/NMEA.html#_rpm_revolutions) in NMEA 0183 - only record when status "A" |
| trim id="n"     | 0 to 100 | Propeller pitch as a percentage of the maximum (%) - boats<br />See [RPM](https://gpsd.gitlab.io/gpsd/NMEA.html#_rpm_revolutions) in NMEA 0183 - only record when status "A" |
| torq id="n"     | >= 0     | Engine torque in Newton metres (Nm)<br />e.g. helicopters    |
| temp id="n"     |          | cylinder head, exhaust gas, carburetor, oil, coolant         |
| pressure id="n" | >= 0     | Boost, vacuum, oil, coolant, fuel                            |
| level id="n"    | >= 0     | Fuel / oil quantity in litres (L)                            |
| volts id="n"    | >= 0     | Battery level in volts (V)                                   |
| amps id="n"     | >= 0     | Battery current - negative (charging) or positive (discharging) in amps (A) |


All elements have have maxOccurs="unbounded", plus an two optional attributes.

Examples of the "src" attribute:

- "e" (engine), "s" (shaft), "r" (rotor), "p" (propeller), "i" (impeller), "w" (wheel)

Examples of the "id" attribute:

- numerical - e.g. "1", "2", "3" or "4" for cylinder heads
- textual - e.g. "l" / "r" (left / right) for aircraft fuel tanks, or "p" / "s" (port / starboard) for boat engines



Notes

- Tachometers can be found on motor vehicles (rev counter), motor boats (motor RPM) and aircraft (tachometer / tach).
  - Multiple readings are allowed, primarily for helicopters and tanks

WIP

- planes - see [video](https://www.youtube.com/watch?v=fmTsLe8J8QQ) and [another](https://www.youtube.com/watch?v=GU2o2h3EE38) and [another](https://www.youtube.com/watch?v=NZn7Dd2jYFw)

  - Engine
    - Temperature
      - exhtemp - EGT - exhaust gas temperature, either just one cylinder or one for each cylinder - e.g 4 readings
      - engtemp - CHT - cylinder head temperature for each cylinder - e.g 4 readings
    - engrpm - Tachometer for engine - RPM or percentage
  - Carburetor
    - carbtemp - Temperature - positive or negative degrees C
  - Fuel
    - fuelqty - Fuel in each tank (left and right) absolute values (e.g. pounds or US gallons) or percentage
    - fuelpres  - Fuel pressure in psi >= 0 - use kPa
  - Oil
    - oiltemp - Temperature - displayed in C or F
    - oilpres - Pressure in psi >= 0 - use kPa
  - Battery
    - battamp - Ammeter - negative (charging) or positive (discharging) in amps
    - battvolt - Voltage >= 0
  - Vacuum pressure
    - Gyro "suction" float >= 0
- helicopter - [video](https://www.youtube.com/watch?v=regka_rS2Rw)
  - Engine
    - Temperature
      - engtemp - engine / gas generated turbine in degrees C
    - Tach indicators
      - engrpm - engine / gas generated turbine - RPM (or percentage)
      - rotrpm - rotor - RPM or percentage
    - engtorq - Torque indicator (power out of the engine) - PSI (or percentage)
  - Fuel
    - fuelqty - in tank - absolute or percentage
    - fuelpres - Fuel pressure in bars or PSI - use kPa
  - Oil
    - oiltemp - Turbine oil temperature (TOT) - displayed in C or F
    - oilpres - Pressure in bars or PSI - use kPa
  - Battery
    - battamp - Ammeter (DC Amp) - negative (charging) or positive (discharging) in amps
    - battvolt - Voltage >= 0
  - IGNORED FOR NOW
    - warning lights - [video](https://youtu.be/regka_rS2Rw?t=307)
- Boat - stuff not in plane or helicopter
  - Analogue gauges
    - speedometer, tachometer, fuel, trim, water pressure, voltmeter - [video](https://www.youtube.com/watch?v=BOTuN2Hps7Y)
    - oil pressure, fuel level, water temperature
    - dashboard blind with great picture - [link](https://www.wavetowave.com/home/2017/10/3/dashboard-bling-an-overview-of-marine-gauges) with [picture](https://images.squarespace-cdn.com/content/v1/596d2c30d7bdce7d9e727a92/1532739820376-BCDZHKT8KDVRV60HJI0R/Livorsi+Marine+Gauges+blue+monster.jpg?format=2500w)
      - Gauges for each engine
        - tachometer (rpm)
        - Water temp + pressure
        - Oil temp + pressure
        - Fuel level + pressure
      - 2 x battery level (volts)
      - 1 x speed (GPS)
    - cylinder head temp gauge also seen in a video on [YouTube](https://www.youtube.com/watch?v=vyhv3YSibQ0)
  
  - Coolant
    - coolpres - pressure
  
  - Boost
    - bstpres - pressure
  - engineer and transmission oil pressure + vaccuum pressure - [link](https://www.youtube.com/watch?v=AWshPMwMbHA&t)
  - fuel efficiency



####  Meteorological - gpx_met

Meteorological data can be added to `<wpt>`, `<rtept>` and `<trkpt>` elements via extensions in GPX 1.1 and 1.2.

All of the environment elements are in the [MDA](https://gpsd.gitlab.io/gpsd/NMEA.html#_mda_meteorological_composite) sentence of NMEA 0183.

| Name      | Values   | Description                                                  |
| --------- | -------- | ------------------------------------------------------------ |
| `<atemp>` |          | Air temperature in degrees centigrade (° C)<br />See [MDA](https://gpsd.gitlab.io/gpsd/NMEA.html#_mda_meteorological_composite) in NMEA 0183 |
| `<wtemp>` |          | Water temperature in degrees centigrade (° C)<br />See [MDA](https://gpsd.gitlab.io/gpsd/NMEA.html#_mda_meteorological_composite) and [MTW](https://gpsd.gitlab.io/gpsd/NMEA.html#_mtw_mean_temperature_of_water) in NMEA 0183 |
| `<gwd>`   | 0 to 360 | Ground wind direction (GWD), relative to true north in degrees (°)<br />See [MDA](https://gpsd.gitlab.io/gpsd/NMEA.html#_mda_meteorological_composite) in NMEA 0183 |
| `<gws>`   | >= 0     | Ground wind speed (GWS) in metres per second (m/s)<br />See [MDA](https://gpsd.gitlab.io/gpsd/NMEA.html#_mda_meteorological_composite) in NMEA 0183 |
| `<baro>`  | > 0      | Barometric pressure in hectopascals (hPa) / millibars (mb)<br />See [MDA](https://gpsd.gitlab.io/gpsd/NMEA.html#_mda_meteorological_composite) in NMEA 0183 |
| `<hum>`   | 0 to 100 | Relative humidity in percent (%)<br />See [MDA](https://gpsd.gitlab.io/gpsd/NMEA.html#_mda_meteorological_composite) in NMEA 0183 |
| `<dew>`   |          | Dew point in degrees centigrade (° C)<br />See [MDA](https://gpsd.gitlab.io/gpsd/NMEA.html#_mda_meteorological_composite) in NMEA 0183 |



Notes:

- wind direction + speed use their nautical names, signifying "wind over ground" or "ground wind" (GWD + GWS)
- dew point is included, because it can be directly measured (or calculated from air temperature and relative humidity) - TODO link

Unnecessary:

- wind chill is not included because it is calculated from the air temperature and wind speed - TODO link
- heat index is not included, because it is calculated from air temperature and relative humidity - TODO link



#### Fitness - gpx_fit

Core outputs from fitness and cycling sensors can be added to `<wpt>`, `<rtept>` and `<trkpt>` elements via extensions in GPX 1.1 and 1.2.

| Name        | Values   | Description                                                  |
| ----------- | -------- | ------------------------------------------------------------ |
| `<hr>`      | int > 0  | Heart rate in beats per minute (bpm)                         |
| `<cad>`     | >= 0     | Cycling (cadence), running (stride rate), or swimming / rowing (stroke rate) |
| `<power>`   | >= 0     | Power in watts (W)                                           |
| `<kcal>`    | >= 0     | Total energy in kilo calories (kcal)                         |
| `<elegain>` |          | Total elevation gain in meters (m)                           |
| `<steps>`   | int >= 0 | Total steps during the session                               |



- Elevation gain is included to avoid cumulative errors
  
- Energy is included to avoid the cumulative errors that might occur when converting from power
  - n.b. Power and energy can be monitored / updated more frequently than the typical 1 second GNSS interval

- Cadence may not seem necessary for walking but it can be updated more accurately when the exact timing of steps is known

- Bike computers track hr, cad, power, kcal

- Aside from "steps", counting something for a whole session does not occur in many sports:
  - Cyclists only tend to count revolutions of the pedals for about 15 or 20 seconds - [link](https://coachlevi.com/cycling/how-to-count-your-cadence/)
  - Swimmers only tend to count strokes for one or two lengths of the pool - [link](https://www.yourswimlog.com/swolf-swimming/)
  - TBC - should it be a generic "reps" for teps (walking), strokes (rowing), jumps (skipping) or hops (pogo stick)


Elsewhere

- Revolutions per minute (RPM) of bike wheel - use tachometer in the generic extension (gpx_gen)



#### Sea / Nautical - gpx_sea

Sea / nautical elements can be added to `<wpt>`, `<rtept>` and `<trkpt>`  elements via extensions in GPX 1.1 and 1.2.

| Name      | Values      | Description                                                  |
| --------- | ----------- | ------------------------------------------------------------ |
| `<stw>`   |             | Speed through the water (STW) / boat speed in meters per second (m/s)<br />See [VHW](https://gpsd.gitlab.io/gpsd/NMEA.html#_vhw_water_speed_and_heading) in NMEA 0183 - units are knots or km/h, but recommend converting from knots to m/s<br />n.b. different to `<sog>` in gpx_pvt which is speed over ground |
| `<dist>`  | >= 0        | Cumulative distance for the trip / distance through the water since last reset in meters (m)<br />See [VLW](https://gpsd.gitlab.io/gpsd/NMEA.html#_vlw_distance_traveled_through_water) (water distance since reset) in NMEA 0183 - units are nautical miles so need to convert to meters<br />n.b. different to `<dist>` in gpx_pvt which is trip distance over ground |
| `<awa>`   | -180 to 180 | Apparent wind angle (AWA), relative to the bow in degrees (°)<br />See [MWV](https://gpsd.gitlab.io/gpsd/NMEA.html#_mwv_wind_speed_and_angle) (reference = R) and [VWR](https://gpsd.gitlab.io/gpsd/NMEA.html#_vwr_relative_wind_speed_and_angle) in NMEA 0183 |
| `<aws>`   | >= 0        | Apparent wind speed (AWS) in metres per second (m/s)<br />See [MWV](https://gpsd.gitlab.io/gpsd/NMEA.html#_mwv_wind_speed_and_angle) (reference = R) and [VWR](https://gpsd.gitlab.io/gpsd/NMEA.html#_vwr_relative_wind_speed_and_angle) in NMEA 0183 |
| `<twa>`   | -180 to 180 | True wind angle (TWA) representing wind-over-water, relative to the bow in degrees (°)<br />See [MWV](https://gpsd.gitlab.io/gpsd/NMEA.html#_mwv_wind_speed_and_angle) (reference = T) in NMEA 0183 |
| `<tws>`   | >= 0        | True wind speed (TWS) representing wind-over-water in metres per second (m/s)<br />See [MWV](https://gpsd.gitlab.io/gpsd/NMEA.html#_mwv_wind_speed_and_angle) (reference = T) in NMEA 0183 |
| `<set>`   | 0 to 360    | Direction of the water / current, relative to true north in degrees (°)<br />See [VDR](https://gpsd.gitlab.io/gpsd/NMEA.html#_vdr_set_and_drift) in NMEA 0183 |
| `<drift>` | >= 0        | Speed of the water / current in meters per second (m/s)<br />See [VDR](https://gpsd.gitlab.io/gpsd/NMEA.html#_vdr_set_and_drift) in NMEA 0183 - units are knots so need to convert to m/s |
| `<depth>` | >= 0        | Depth of the water below the surface in meters (m)<br />See [DBS](https://gpsd.gitlab.io/gpsd/NMEA.html#_dbs_depth_below_surface) (not DBK or DBT) in NMEA 0183 - often determined by chartplotter or fishfinder |



Notes:

- "Ground distance since reset" (VLW sentence) should go in `<pvt:dist>`
- Everything is covered by [IEC 61162](https://en.wikipedia.org/wiki/IEC_61162) part 1 (single talker and multiple listeners) which is [NMEA 0183](https://en.wikipedia.org/wiki/NMEA_0183)
- Boat speed / speed through the water (STW) is typically measured using a paddlewheel or ultrasonic transducer
- Distance through water is included to avoid possible accumulated errors when deriving from speed every second.
- True wind is typically wind-over-water (using heading and water speed sensor) but can be wind-over-ground (using heading, COG + SOG)
  - Strictly speaking you do not need to record TWA and TWS.
    - However, recording the true wind will help to maintain precision
- Tidal elements "drift" and "set" can be calculated from other elements but have been included to maintain precision
  - See page about [set and drift][http://www.sailfastllc.com/AppNoteCurrentSetAndDrift] which explains how they are determined using a vector triangle, hence their exclusion.
- Rate of turn (ROT):
  - ROT represents the rate of change of heading, typically measured by external rate of turn turn indicator ([ROTI](https://en.wikipedia.org/wiki/Rate_of_turn_indicator))
  - ROT should <u>not</u> be derived from COG information - [link](https://www.navcen.uscg.gov/ais-class-a-reports)
- Elsewhere:
  - Engine revolutions per minute (RPM) - use tachometer which is in the generic extension (gpx_gen)
- Unnecessary:
  - No need for true wind direction (TWD) which represents wind-over-water, relative to true north in degrees (°)
    - It can easily be calculated from TWA and heading
      - TWD = (TWA + heading)  % 360
  - No need for velocity made good (VMG), directly upwind or downwind - short [video](https://www.youtube.com/watch?v=14TYwonISH0)
    - VMG using [VPW](https://gpsd.gitlab.io/gpsd/NMEA.html#_vpw_speed_measured_parallel_to_wind)
    - VMG can be calculated from STW + heading and TWD - long [video](https://www.youtube.com/watch?v=KdeVIgqN8Ec)
    - It is also possible to calculate VMG using SOG + COG and TWD
  - No need for opposite tacking heading
    - It provides the navigator with the Heading the Boat will be sailing on if it is sailed to the same wind angle on the opposite Tack
    - It is very simple to calculate opposite tack heading from the current heading and TWD
- Links
  - See page about [wind](https://raymarine.custhelp.com/app/answers/detail/a_id/3794/~/apparent-wind%2C-true-wind-and-ground-wind%2C-and-data-required-to-calculate-them#:~:text=Apparent%20Wind%20will%20vary%20depending,(wind%20on%20the%20bow.)) for details about apparent wind, true wind, etc.
  - See page about [distance](https://forum.raymarine.com/showthread.php?tid=123) logs



#### Air / Aviation - gpx_air

Air / aviation elements can be added to `<wpt>`, `<rtept>` and `<trkpt>`elements via extensions in GPX 1.1 and 1.2.

All items listed below are maxOccurs="unbounded"


| Name                         | Values       | Description                                                  |
| ---------------------------- | ------------ | ------------------------------------------------------------ |
| `<ias>`                      | >= 0         | Indicated airspeed (IAS) is measured by a pitot-static system in meters per second (m/s) |
| `<cas>`                      | >= 0         | Calibrated airspeed (CAS) is a more accurate version of IAS and sometimes used as the the indicated air speed. |
| `<eas>`                      | >= 0         | Equivalent airspeed (EAS) is closely related to Mach number and can therefore be measured via pressure differences |
| `<tas>`                      | >= 0         | True airspeed (TAS) is the speed of the aircraft relative to the airmass in which it is flying in meters per second (m/s)<br />Calculated using EAS and density (i.e. pressure altitude and OAT, ignoring humidity) or from mach + OAT |
| `<mach>`                     | >= 0         | Mach number<br />Calculated directly from the pitot-static system, or from TAS and OAT |
| `<ialt set="nnn" ref="xxx">` |              | Indicated altitude shows elevation / altitude / height of an aircraft in meters (m)<br />"set" is the pressure setting / sub-scale shown in the Kollsman window in hectopascals (hPa)<br />"ref" is the pressure reference and might be "qnh" (elevation / altitude), "qfe" (height) or "std" (pressure altitude) |
| `<palt>`                     |              | Pressure altitude is the height above the standard datum plane (SDP) in meters (m). Pressure altitude uses a pressure setting of 1013.25 hPa and is used to determine the flight level (FL) of the aircraft above MSL. |
| `<dalt>`                     |              | Density altitude is the altitude relative to standard atmospheric conditions at which the air density would be equal to the indicated air density in meters (m). Density altitude is affected by pressure, temperature and humidity. |
| `<agl>`                      |              | Height above ground level (HAGL) is the vertical distance with respect the underlying terrain in meters (m). AGL is determined by a radar / radio altimeter as opposed to a barometric altimeter. |
| `<slip>`                     | -180 to +180 | Slip / skid indicates whether the aircraft is in coordinated flight during a turn, measured in degrees (°)<br />positive = [slip]((https://en.wikipedia.org/wiki/Slip_(aerodynamic)), negative = [skid](https://en.wikipedia.org/wiki/Skid_(aerodynamic)) |

- Abbreviations - [Wiki](https://en.wikipedia.org/wiki/List_of_aviation,_avionics,_aerospace_and_aeronautical_abbreviations) - [FAA](https://www.faa.gov/air_traffic/publications/atpubs/aip_html/part1_gen_section_2.2.html) - [Pegasus](https://www.flypgs.com/en/travel-glossary/abbreviations) - [UK gov](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1059508/Glossary_of_Abbreviations.pdf)
  - FAA, Pegasus and UK gov do not list PA / DA, hence my use of palt and dalt

TBC - 2 x angle of attack (AOA) sensors

Notes

- True altitude should be recorded in `<ele>`
- OAT / SAT should be recorded in `<met:atemp>`
  - RAT / TAT can be recorded in `<met:atemp id="2">`

- Engine stuff should use the engine extension
  - e.g. Tachometer data should be recorded in `<eng:tach>`
    - Use `<eng:tach id="2">` for helicopters, etc

- pressure altitude would be recorded as `<alt set="1013.25">...</alt>`
- On large jet aircraft the IAS is by far the most important speed indicator. Most aircraft speed limitations are based on IAS, as IAS closely reflects dynamic pressure. TAS is usually displayed as well, but purely for advisory information and generally not in a prominent location.
- CAS can be calculated from TAS, OAT and pressure altitude - [link](https://en.wikipedia.org/wiki/Indicated_airspeed#IAS_and_navigation)
- Easiest way to calculate EAS is from the mach number.
- TAS is becoming less necessary now because of the advent of GPS which provides ground speed (SOG)

Temperature stuff can be deemed redundant perhaps?

| Name                     | Values       | Description                                                  |
| ------------------------ | ------------ | ------------------------------------------------------------ |
| `<tat>`                  |              | Total air temperature (TAT) / indicated air temperature (IAT) in degrees centigrade (° C)<br />n.b. This isn't quite the same as RAT which is dependent on the ram-rise-coefficient (aka recovery factor)<br />Is this redundant as it is used for maths within the air data computer (ADC)?<br />Small aircraft only have OAT |
| `<oat>`                  |              | Outside air temperature (OAT) / static air temperature (SAT) in degrees centigrade (° C)<br />n.b. This is essentially the same as `<atemp>` in gpx_met |
| `<isa>`                  |              | ISA temperature - TBC, redudant?                             |



Pressure altitude can be calculated using a formula - [link](https://aviation.stackexchange.com/questions/96885/what-is-the-real-formula-for-pressure-altitude)



Complex stats on Garmin include density altitude, wind direction - [link](https://www.euroga.org/forums/hangar-talk/4752-oat-versus-tat)

Apple app - [link](https://apps.apple.com/ie/app/altimeter-for-aviators/id1463100680)

Pitot-static system mentions multiple static ports - [wiki](https://en.wikipedia.org/wiki/Pitot-static_system#)

Variometer (vspeed) with picture of device for paragliders, hang gliders, ballooners - [wiki](https://en.wikipedia.org/wiki/Variometer)

Airspeed indicator - [wiki](https://en.wikipedia.org/wiki/Airspeed_indicator)

- mach number is relative to the speed of sound which is dependent on temperature / altitude - [wiki](https://en.wikipedia.org/wiki/Mach_number#)
- EAS and mach number are directly linked
- Mach number is a function of temperature and true airspeed. Aircraft flight instruments, however, operate using pressure differential to compute Mach number, not temperature.
- Most detailed explanation of IAS, CAS, EAS, TAS - [link](https://aviation.stackexchange.com/questions/64735/how-to-calculate-equivalent-airspeed-immediately-from-calibrated-airspeed)
  - another article about slow aircraft and link to TAS video - [link](https://aviation.stackexchange.com/questions/60542/temperature-sensor-are-needed-to-compute-true-airspeed-for-low-speed-aircrafts) + [video](https://www.youtube.com/watch?v=Qd1oCqzJZPM)

- Good explanation in aviation stackoverflow describes mach, etc  - [link](https://aviation.stackexchange.com/questions/1793/how-does-a-mach-meter-determine-the-speed-of-sound-at-a-given-altitude)
  - mach is only dependent on dynamic and static pressure


Hi Heather. Can I ask you a few basic aeronautical questions? I'm working on some proposed enhancements to the GPX file format, primarily for sports interested in speed but there is some basic sailing and aviation stuff included as well. I want to ensure that my understanding and use of terminology is correct with regards aviation. Firstly, there are obviously multiple conventions for airspeed (e.g. ias, cas, eas, tas). I am proposing that ias and tas be recorded and that cas / eas can be considered redundant because they can easily be calculated retrospectively when you also have the indicated altitude (plus the altimeter pressure setting) and outside air temperature. Does this make sense or have I overlooked something? Secondly, I am aware of 6 types of altitude (indicated, absolute, true, height, pressure, density). I'm proposing to include indicated altitude (plus the altimeter pressure setting) and the absolute altitude (i.e. radar altimeter reading) as I think the others can all be re-calculated when you also know the altitude and outside air temperature. Lastly, I've seen 6 names for temperature (iat / rat / tat, oat / sat / true) and I'm thinking of recording two values referred to as iat and oat. I'm assuming that as a pilot you are most interested in "indicated air temperature" and you sometimes tell passengers the "outside air temperature". Hopefully I've understood things correctly (please correct me if I am wrong, or if alternative names / conventions are more common) because you know, stuff on the internet can easily mislead. :D



Air Data Computer (ADC) - [link](https://aviation.stackexchange.com/questions/1793/how-does-a-mach-meter-determine-the-speed-of-sound-at-a-given-altitude) and [wiki](https://en.wikipedia.org/wiki/Air_data_computer)

- inputs = static pressure, pitot pressure, TAT





RAT and TAT are slightly different - [link](https://aviation.stackexchange.com/questions/1640/what-is-the-difference-between-oat-rat-tat-and-sat)

​	Another example with code and mentioning the difference of IAT and TAT - [link](https://www.hpmuseum.org/forum/thread-18073.html)




- Standard abbreviations used where applicable; ias / tas, iat / oat



There are multiple types of everything, I've chosen two of each as the others can be calculated:

- 4 common conventions for airspeed - **ias**, cas, eas, **tas**
- 6 types of altitude in aviation - **indicated**, **absolute**, true, height, pressure, density
- 6 types of temperature - **iat** / rat / tat, **oat** / sat / true



What is the source for the flight data shown on in-flight entertainment systems? - [link](https://aviation.stackexchange.com/questions/11411/what-is-the-source-for-the-flight-data-shown-on-in-flight-entertainment-systems)



Details

- 4 common conventions for airspeed - [link](https://en.wikipedia.org/wiki/Airspeed)
  - ias - Indicated airspeed is measured by a pitot-static system in meters per second (m/s)
  - cas - Calibrated airspeed is the indicated airspeed adjusted for pitot system position and installation error in meters per second (m/s)
  - eas - Equivalent airspeed is the calibrated airspeed adjusted for compressibility effects in meters per second (m/s)
  - tas - True airspeed is the equivalent airspeed adjusted for air density (requires temperature) in meters per second (m/s)
    - shown on glass panel displays
    - conversion tool exists - [link](https://aerotoolbox.com/airspeed-conversions/) and [another](http://www.luizmonteiro.com/altimetry.aspx) (not sure if it is accurate)
- 6 types of altitude in aviation - [link](https://en.wikipedia.org/wiki/Altitude#In_aviation)
  - pressure altitude - [wiki](https://en.wikipedia.org/wiki/Pressure_altitude)
    - Pressure altitude is used to indicate "flight level" which is the standard for altitude reporting, measured in meters (m)
    - Altitude indicated when the altimeter setting window (barometric scale) is adjusted to 29.92 "Hg. This is the altitude above the standard datum plane, which is a theoretical plane where air pressure (corrected to 15 °C) equals 29.92 "Hg
    - can be calculated - [link](https://www.flight-insight.com/post/pressure-altitude-vs-density-altitude)
    - see video from inside helicopter showing pressure altitude and density altitude - [link](https://youtu.be/regka_rS2Rw?t=568)
  - density altitude can also be calculated using static pressure (or pressure altitude) and outside air temperature - [link](https://en.wikipedia.org/wiki/Density_altitude#Approximation_formula_for_calculating_the_density_altitude_from_the_pressure_altitude)
  - true altitude can be calculated - [link](https://aviation.stackexchange.com/a/37790)
    - height can therefore be calculated using GIS data
  - altitude setting should be "at least 27.50 - 31.50 inches of Hg / 931.3 to 1066.7  mb" - [link](https://aviation.stackexchange.com/questions/58676/what-s-the-setting-range-altimeters-can-handle#:~:text=The%20specified%20scale%20range%20is,(931.3%20to%201066.7%20mb).)
    - Altimeter setting - [wiki](https://en.wikipedia.org/wiki/Altimeter_setting)
    - The setting may be inches or mb
  - [Height above ground level](https://en.wikipedia.org/wiki/Height_above_ground_level#Aviation) (AGL) can be determined using a [radar altimeter](https://en.wikipedia.org/wiki/Radar_altimeter#)
  
- 6 types of temperature


    - Indicated air temperature (IAT) / ram air temperature (RAT) / total air temperature (TAT)


    - Outside air temperature (OAT) / static air temperature (SAT) / true air temperature


Kinda extra...

  - TAS can potentially be calculated after the event but it is included for a similar reason as apparent wind vs true wind in yachts
  - OAT can potentially be calculated after the event but it is included for a similar reason as apparent wind vs true wind in yachts
    - See video from inside helicopter showing OAT in F and C - [link](https://youtu.be/regka_rS2Rw?t=557)
    - OAT is also shown on the in-flight entertainment systems


See [article](https://www.mcico.com/resources/flight-instruments/six-pack-aircraft-instruments-explained) about the 6 basic aircraft instruments. Many of the metrics are in other extension schemas

- Standard position / velocity / time (PVT) - elevation (altitude above MSL), vertical speed (rate of climb / descent)
- Inertial Navigation System (INS) - pitch + bank (roll) are referred to as "attitude"

TODO - links to the two good videos on the six pack

Magnetic north vs true north

- Mag2True - [Time for a change of direction](https://www.aerosociety.com/news/time-for-a-change-of-direction) - 4 Aug 2023
  - [working group](https://www.navnin.nl/new/mag2true/) information page - possibly in less than 10 years


Notes:

- The altimeter, airspeed indicator, and vertical speed indicator (variometer) all rely on the Pitot-static tube. 
- The heading indicator, attitude indicator, and turn coordinator rely on gyroscopes.
- Rate of turn (ROT):
  - ROT represents the rate of change of heading, included in the "[six pack](https://www.mcico.com/resources/flight-instruments/six-pack-aircraft-instruments-explained)" of aircraft instruments - [link](https://en.wikipedia.org/wiki/Standard_rate_turn)
  - ROT should <u>not</u> be derived from COG information - [link](https://www.navcen.uscg.gov/ais-class-a-reports)
- Slip and skid
  - Stuff about sideslip - [link](https://aviation.stackexchange.com/questions/77125/how-does-sideslip-indicator-react-during-crosswind)
  - Gliders tend to have a [yaw string](https://en.wikipedia.org/wiki/Yaw_string) instead of an elaborate slip / skid indicator and they do not have an attitude indicator ("artificial horizon").
    - See [link](http://airplanegroundschools.com/Glider-Airplanes/glider-flight-instruments.html) used for insights into sensors on a glider and [photo](https://aviation.stackexchange.com/questions/63959/is-it-normal-for-gliders-not-to-have-attitude-indicators)
- Excluded
  - Glide ratio (slope) can be determined from ground "speed" (SOG) and "vspeed" (rate of descent) - [link](https://www.nasa.gov/pdf/582952main_Glide-Slope%20Ratio%20Explanation.pdf)
    - glide ratio = horizontal distance /  change in altitude
    - glide ratio (instantaneous) = horizontal speed (SOG) / vertical speed
    - n.b. glide slope may be used in combination with VNAV (vertical navigation)
  - Drift angle - "drift"
    - "Drift angle is just the difference between your heading and your ground track" - [link](https://aviation.stackexchange.com/a/95984) 
    - n.b. Cars also have concepts of drift (deliberate oversteer) and skid (2 types which are equivalent to slip and skid) - [link](https://thecontentauthority.com/blog/drift-vs-skid)
- Useful links
  - drone [log](PressDiff, IndicatedAirSpeed, Temperature)
    - TBC - consider ENU / NED extension?




#### Navigation - gpx_nav

TBC - sailing

- course made good (CMG)
- distance made good (DMG)
- waypoint name / UUID
- bearing to waypoint
- distance to waypoint
- off course
- desired COG
- turn

TBC - aviation

- Course deviation indicators works in conjunction with the navigation radios - [link](https://youtu.be/GU2o2h3EE38?list=LL&t=336) and [another](https://youtu.be/NZn7Dd2jYFw?t=232)
  - Navigates using nav aid or GPS waypoint (i.e. 2 sources)
  - Also used for IOS approach or VNAV approaches (vertical navigation)
  - VOR indicators have OBS knobs
